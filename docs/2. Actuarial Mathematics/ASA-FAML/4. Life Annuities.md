# **Life Annuities**

## **Overview**

Life Annuity contracts promise to pay out a **stream of benefits** in the future for *as long* the policyholder remains alive. Similar to life insurance, the benefits can be paid discretely or continuously and can be valued through their EPV.

Note that these are different from the annuities covered in Exam FM. The payments for those annuities are made **regardless** of the life of the policyholder, known as **Annuity Certain**. They serve as the foundation to understanding Life Annuities.

## **Review: Annuities Certain**

There are two types of payment structures:

<center>

| Period Start | Period End |
| :-: | :-: |
| Paid in Advance | Paid in Arrears |
| Annuity Due | Annuity Immediate |
| $\ddot{a}_{\enclose{actuarial}{n}}$ | $a_{\enclose{actuarial}{n}}$ |

</center>

<!-- Self Made -->
![Annuity Certain](Assets/4.%20Life%20Annuities.md/Annuity%20Certain.png){.center}

The overall PV of the annuity is the sum of the PV of the stream of payments:

$$
\begin{aligned}
    a_{\enclose{actuarial}{n}} &= v + v^2 + v^3 + \dots + v^n \\
    &= \frac{v-v^{n+1}}{1-v} \\
    &= \sum^n_{k=1} v^k \\
    &= \frac{v(1-v^n)}{1-v} \\
    &= \frac{1-v^n}{i} \\
    \\
    \ddot{a}_{\enclose{actuarial}{n}}
    &= 1 + v + v^2 + \dots + v^n \\
    &= \sum^{n-1}_{k=0} v^k \\
    &= \frac{1- v^{n}}{1-v} \\
    &= \frac{1- v^{n}}{d}
\end{aligned}
$$

Notice that the payments simply differ by one period and hence one discounting factor:

$$
\begin{aligned}
    \ddot{a}_{\enclose{actuarial}{n}}
    &= 1 + v + v^2 + v^3 + \dots + v^n \\
    &= (1+i) (v + v^2 + v^3 + \dots + v^n) \\
    &= (1+i) \sum^{n}_{k=1} v^k \\
    &= (1+i) a_{\enclose{actuarial}{n}}
\end{aligned}
$$

From another perspective, only the payments at the **end points** $t=0$ and $t=n$ are different:

$$
\begin{aligned}
    \ddot{a}_{\enclose{actuarial}{n}}
    &= \sum^{n-1}_0 v^k \\
    &= v^0 + \sum^{n-1}_{k=1} v^k \\
    &= 1 + a_{\enclose{actuarial}{n-1}} \\
    &= 1 + a_{\enclose{actuarial}{n}} - v^n
\end{aligned}
$$

<!-- Self Made -->
![Annuity Certain Relationship](Assets/4.%20Life%20Annuities.md/Annuity%20Certain%20Relationship.png){.center}

## **Payable Discretely**

If the contract pays out benefits discretely, then $k$ is used as the survival model.

Since a life annuity pays out a stream of benefits, the PV of the contract at every time period can be slightly confusing. It is important to remember the following:

1. The PV is calculated with respect to time 0
2. The PV is the *sum of the PV* of all the payments the individual is expected to live

$$
\begin{aligned}
    PV
    &=
    \begin{cases}
        a_{\enclose{actuarial}{K_x}}, & \text{Life Annuity Immediate} \\
        \ddot{a}_{\enclose{actuarial}{K_x + 1}}, & \text{Life Annuity Due}
    \end{cases}
\end{aligned}
$$

<!-- Self Made -->
![Life Annuity PV Immediate](Assets/4.%20Life%20Annuities.md/Life%20Annuity%20PV.png){.center}

Thus, the EPV of the contract is the **sum product** of the **PV of the benefit** in each period and the **probability of death** in that period:

$$
\begin{aligned}
    EPV
    &=
    \begin{cases}
        \text{Life Annuity Immediate} &=\ \sum a_{\enclose{actuarial}{k}} \cdot {}_{k|}q_{x} \\
        \text{Life Annuity Due} &= \sum \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x}
    \end{cases}
\end{aligned}
$$

For the remainder of the section, to be concise, only the formulas for **Annuity Due** will be given. The corresponding formulas for Annuity Immediates can be easily calculated from it.

### **Actuarial Notation**

Most of the notation for Life Insurance applies to Life Annuities as well.

The key difference is that ${}^{k}a$ is used to represent the **k-th moment** of the **present value** of a contract where a benefit of 1 is paid discretely for as long as the status **does NOT fail**.

$A$ stands for Assurance while $a$ stands for Annuity.

### **Whole Life Annuity**

**Whole Life Annuities** covers the insured **indefinitely** and thus *will* pay out for as long as the insured **survives**.

Let **WL** be the random variable denoting the PV of the survival benefit:

$$
\begin{aligned}
   \text{WL}_{\text{Due}} &=\ddot{a}_{\enclose{actuarial}{K_x+1}}
\end{aligned}
$$

<!-- Self Made -->
![WL Due](Assets/4.%20Life%20Annuities.md/WL%20Due.png)

Thus, the EPV is the **Expectation** of the WLA random variable:

$$
\begin{aligned}
    E(\text{WLA}_{\text{Due}}) &= \sum^{\infty}_{k = 0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x} \\
    \ddot{a}_{x} &= \sum^{\infty}_{k = 0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x}
\end{aligned}
$$

The EPV can be furthered simplified, allowing a life annuity to be viewed as the **sum of a series of pure endowments**:

$$
\begin{aligned}
    \ddot{a}_{x}
    &= \sum^{\infty}_{k = 0} \ddot{a}_{\enclose{actuarial}{k}} \cdot {}_{k|}q_{x} \\
    &=\sum^{\infty}_{k = 0} \left(\sum^{n-1}_{j=0} v^j \right)  \cdot {}_{k|}q_{x} \\
    &= v^0 \cdot {}_{0|}q_{x} + (v^0 + v^1) \cdot {}_{1|}q_{x} + (v^0 + v^1 + v^2) \cdot {}_{2|}q_{x} + \dots \\
    &= v^0 ({}_{0|}q_{x} + {}_{1|}q_{x} + \dots) + v^1 ({}_{1|}q_{x} + {}_{2|}q_{x} + \dots) + v^2 ({}_{2|}q_{x} + {}_{3|}q_{x} + \dots) + \dots \\
    &= \sum^{\infty}_{j=0} v^j \cdot \left(\sum^{\infty}_{k = j} {}_{k|}q_{x} \right) \\
    &= \sum^{\infty}_{j=0} v^j \cdot {}_{j}p_{x}
\end{aligned}
$$

!!! Warning

    Note that the above formula can be used to easily prove the relationships between different kinds of annuities, but is **NOT a proper definition of an annuity**.
    
    It hence cannot be adjusted to compute the variance or other "special" annuities.

The second moment and variance for all life annuities will be covered in a later section.

### **Temporary Annuity**

**Temporary Life Annuities** covers the insured for a **specified period $n$** and thus pays out for as long as the insured **survives** during that period *only*.

Let **TA** be the random variable denoting the PV of the survival benefit:

$$
\begin{aligned}
   \text{TA}_\text{Due}
    &=
    \begin{cases}
            \ddot{a}_{\enclose{actuarial}{K_x+1}},& k = 0, 1, 2, \dots, n-1 \\
            \ddot{a}_{\enclose{actuarial}{n}},& k \ge n \\
    \end{cases} \\
    &= \ddot{a}_{\enclose{actuarial}{\min(K_x + 1, n)}}
\end{aligned}
$$

<!-- Self Made -->
![TA Due](Assets/4.%20Life%20Annuities.md/TA%20Due.png)

Thus, the EPV is the expectation of the TA random variable, which can be simplified using the same approach as before:

$$
\begin{aligned}
    E(\text{TA}_\text{Due}) &= \sum^{n-1}_{k = 0} \ddot{a}_{\enclose{actuarial}{k}} \cdot {}_{k|}q_x + \ddot{a}_{\enclose{actuarial}{n}} \cdot {}_{n}p_x \\
    \ddot{a}_{x:\enclose{actuarial}{n}} &= \sum^{n-1}_{j=0} v^j \cdot {}_{j}p_{x}
\end{aligned}
$$

Note the change in limits for the simplified approach - an annuity is the combination of pure endowments for **as long as the annuity lasts**.

This gives rise to a very simple sense check - the EPV of an $n$ year temporary annuity should NOT be larger than $n$ as there are $n$ payments of 1 which are discounted.

### **Deferred Annuities**

Deferred Annuities are variations of the above contracts where the **coverage is deferred by $n$ years**. While any contract can be deferred, the most useful is the **Deferred Whole Life Annuity**.

Let **DWL** be the random variable denoting the PV of the survival benefit:

$$
\begin{aligned}
    \text{DWL}_{\text{Due}}
    &=
    \begin{cases}
        0, & k = 0, 1, 2, \dots, n-1 \\
        v^n \cdot \ddot{a}_{\enclose{actuarial}{K_x+1-n}}, & k \ge n
    \end{cases}
\end{aligned}
$$

Intuitively, the RV can also be expressed as the difference between two certain annuities:

$$
\begin{aligned}
    \text{DWL}_{\text{Due}}
    &= v^n \cdot \ddot{a}_{\enclose{actuarial}{k+1-n}} \\
    &= v^n \cdot \frac{1-v^{k+1-n}}{d} \\
    &= \frac{v^{n}-v^{k+1}}{d} \\
    &= \frac{(1-v^{k+1}) - (1-v^{n})}{d} \\
    &= \ddot{a}_{\enclose{actuarial}{k+1}} -\ddot{a}_{\enclose{actuarial}{n}} \\
    \\
    \therefore \text{DWL}_{\text{Due}}
    &=
    \begin{cases}
        0, & k = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{k+1}} -\ddot{a}_{\enclose{actuarial}{n}} , & k \ge n
    \end{cases}
\end{aligned}
$$

<!-- Self Made -->
![Deferred Annuity](Assets/4.%20Life%20Annuities.md/Deferred%20Annuity.png)

Thus, the EPV is the **expectation** of the DWL random variable:

$$
\begin{aligned}
    E(\text{DWL}_{\text{Due}})
    &= \sum^{\infty}_{k=n} (\ddot{a}_{\enclose{actuarial}{k+1}} - \ddot{a}_{\enclose{actuarial}{n}}) \cdot {}_{k|}q_{x} \\
    {}_{n|}\ddot{a}_{x}
    &= \sum^{\infty}_{k=0} (\ddot{a}_{\enclose{actuarial}{k+1}} - \ddot{a}_{\enclose{actuarial}{n}}) \cdot {}_{k|}q_{x}
        - \sum^{n-1}_{k=0} (\ddot{a}_{\enclose{actuarial}{k+1}} - \ddot{a}_{\enclose{actuarial}{n}}) \cdot {}_{k|}q_{x} \\
    &= \sum^{\infty}_{k=0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x}
        - \sum^{\infty}_{k=0} \ddot{a}_{\enclose{actuarial}{n}} \cdot {}_{k|}q_{x}
        - \sum^{n-1}_{k=0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x}
        + \sum^{n-1}_{k=0} \ddot{a}_{\enclose{actuarial}{n}} \cdot {}_{k|}q_{x} \\
    &= \sum^{\infty}_{k=0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x}
        - \sum^{n-1}_{k=0} \ddot{a}_{\enclose{actuarial}{k+1}} \cdot {}_{k|}q_{x} \\
    &= \ddot{a}_x - \ddot{a}_{x:\enclose{actuarial}{n}}
\end{aligned}
$$

Similar to before, the EPV can be shown to be a sum of pure endowments:

$$
    {}_{n|}\ddot{a}_{x} = \sum^{\infty}_{j=n} v^j \cdot {}_{j}p_{x}
$$

Since a DWL is effectively a WL that is issued $n$ years later, the EPV of a DWL is the EPV of the WL, adjusted for both interest and survival:

$$
\begin{aligned}
    {}_{n|}\ddot{a}_{x}
    &= \sum^{\infty}_{j=n} v^j \cdot {}_{j}p_{x} \\
    &= \sum^{\infty}_{j=0} v^{j+n} \cdot {}_{j+n}p_{x} \\
    &= \sum^{\infty}_{j=0} v^{j} v^{n} \cdot {}_{n}p_{x} {}_{j}p_{x+n} \\
    &= v^{n} \cdot {}_{n}p_{x} \sum^{\infty}_{j=0} v^{j} \cdot {}_{j}p_{x+n} \\
    &= {}_{n}E_{x} \cdot \ddot{a}_{x+n}
\end{aligned}
$$

This allows a TA to be expressed as the **difference of two WL annuities issued at different times**:

$$
\begin{aligned}
    {}_{n|}\ddot{a}_{x} &= {}_{n}E_{x} \cdot \ddot{a}_{x+n} \\
    \ddot{a}_x - \ddot{a}_{x:\enclose{actuarial}{n}} &= {}_{n}E_{x} \cdot \ddot{a}_{x+n} \\
    \ddot{a}_{x:\enclose{actuarial}{n}} &= \ddot{a}_x - {}_{n}E_{x} \cdot \ddot{a}_{x+n}
\end{aligned}
$$

### **Guaranteed Annuities**

**Guaranteed Life Annuities** are whole life annuities with the **benefits in the first $n$ years being guaranteed** - they will be paid out even if the insured dies during this period.

!!! Tip

    Questions may also refer to these as **WL annuities that are certain for $n$ years**, as the guaranteed portion of the annuity is represented by an annuity certain.

Let **GA** be the random variable denoting the PV of the survival benefit. Since the payments are guaranteed, they can be represented using a **certain annuity**:

$$
\begin{aligned}
    \text{GA}_{\text{Due}}
    &=
    \begin{cases}
        \ddot{a}_{\enclose{actuarial}{n}},& k = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{K_x+1}},& k \ge n
    \end{cases} \\
    &= \ddot{a}_{\enclose{actuarial}{max(K_x+1,n)}}
\end{aligned}
$$

<!-- Self Made -->
![GA Due](Assets/4.%20Life%20Annuities.md/GA%20Due.png)

The random variable can be manipulated to be easier to work with:

$$
\begin{aligned}
    \text{GA}_{\text{Due}}
    &=
    \begin{cases}
        \ddot{a}_{\enclose{actuarial}{n}},& K_x = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{K_x+1}},& K_x \ge n
    \end{cases} \\
    &=
    \begin{cases}
        \ddot{a}_{\enclose{actuarial}{n}},& K_x = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{K_x+1}} - \ddot{a}_{\enclose{actuarial}{n}} + \ddot{a}_{\enclose{actuarial}{n}},& K_x \ge n
    \end{cases} \\
    &=
    \begin{cases}
        \ddot{a}_{\enclose{actuarial}{n}} \\
        \ddot{a}_{\enclose{actuarial}{n}}
    \end{cases}
    +
    \begin{cases}
        0,& K_x = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{K_x+1}} - \ddot{a}_{\enclose{actuarial}{n}},& K_x \ge n
    \end{cases} \\
    &=
    \ddot{a}_{\enclose{actuarial}{n}} +
    \begin{cases}
        0,& K_x = 0, 1, 2, \dots, n-1 \\
        \ddot{a}_{\enclose{actuarial}{K_x+1}} - \ddot{a}_{\enclose{actuarial}{n}},& K_x \ge n
    \end{cases}
\end{aligned}
$$

Thus, the EPV can be more easily calculated:

$$
\begin{aligned}
    E(\text{GA}_{\text{Due}})
    &= \ddot{a}_{\enclose{actuarial}{n}} + 0 \cdot {}_{n}q_x + \sum^{\infty}_{k = n} (\ddot{a}_{\enclose{actuarial}{k+1}} - \ddot{a}_{\enclose{actuarial}{n}}) \cdot {}_{k|}q_{x}\\
    \ddot{a}_{\overline{x:\enclose{actuarial}{n}}}
    &= \ddot{a}_{\enclose{actuarial}{n}} + {}_{n|}\ddot{a}_{x} \\
    &= \ddot{a}_{\enclose{actuarial}{n}} + {}_{n}E_{x} \cdot \ddot{a}_{x+n}
\end{aligned}
$$

!!! Warning

    It is an extremely common mistake to **forget to update the age of the policyholder** in the second term.

    To minimize the chance of this mistake, it is advised to write the expression in terms of the deferred WL first and then convert it.

### **Relationships**

#### **Assurances and Annuities**

Consider the random variable for the PV Whole Life Assurance and Annuity Due. Notice that both RVs are **related** through the certain annuity formula:

$$
\begin{aligned}
    \text{WL} &= v^{K_x + 1} \\
    \text{WLA}_{Due} &= \ddot{a}_{\enclose{actuarial}{K_x+1}} = \frac{1-v^{K_x + 1}}{d}
\end{aligned}
$$

Thus, given the EPV of a life annuity, the **EPV** of a life assurance can be determined, vice-versa:

$$
\begin{aligned}
    \text{WLA} &= \frac{1-\text{WL}}{d} \\
    E(\text{WLA}_{Due}) &= \frac{1-E(\text{WL})}{d} \\
    \ddot{a}_x &= \frac{1-A_x}{d} \\
    d \ddot{a}_x &= 1 - A_x \\
    A_x &= 1 - d \ddot{a}_x
\end{aligned}
$$

The same relationship can be shown for a temporary annuity and an **Endowment Assurance, NOT a term assurance**:

$$
\begin{aligned}
    A_{x:\enclose{actuarial}{n}} &= 1 - d \ddot{a}_{x:\enclose{actuarial}{n}} \\
\end{aligned}
$$

!!! Warning

    It is a very common mistake to think that term assurances and temporary annuities are related, as both share similar roles.

    However, it becomes clear when considering the random variables and actuarial notation that they are not related.

#### **Variance**

However, the second moment is slightly different as it must reflect the new interest rate used.

The same logic can be applied for the **Variance** as well:

$$
\begin{aligned}
    \text{WLA}_{Due} &= \frac{1-\text{WL}}{d} \\
    \text{Var}(\text{WLA}_{Due}) &= \text{Var} \left( \frac{1-\text{WL}}{d} \right) \\
    \text{Var}(\text{WLA}_{Due}) &= \frac{1}{d^2} \text{Var}(\text{WL}) \\
    \text{Var}(\text{WLA}_{Due}) &= \frac{1}{d^2} \left({}_{}^2 A_x - (A_x)^2 \right)
\end{aligned}
$$

    \text{Var}(\text{TA}_{Due}) &= \frac{1}{d^2} \left({}_{}^2 A_{x:\enclose{actuarial}{n}} - (A_{x:\enclose{actuarial}{n}})^2 \right)

WLDue and WL Immediate same variance but DWLDue and DWL immediate different variance because it is dependent on survival
GA = Certain + Deferred
\text{Var} (GA) = \text{Var} (Deferred)

Problem is \text{Var}(Deferred)

#### **Immediate and Due**

Recall that for Certain Annuities, the only difference between Due and Immediate ones are the payments at the start and end times. This relationship can be extended for Life Annuities as well.

For WL annuities, since the **end point is infinity**, the difference in the end points can be ignored. Thus, the only difference is the first payment of 1, which can be easily accounted for:

$$
    a_x = \ddot{a}_x - 1
$$

!!! Note

    This section uses $a_x$ as the focus, as it is assumed that if needed, the due versions will be calculated and then **converted to immediate**, rather than calculating immediate annuities directly.

<!-- Self Made -->
![Life Annuity Due Immediate](Assets/4.%20Life%20Annuities.md/Life%20Annuity%20Due%20Immediate.png)

Unfortunately, the difference at the end cannot be ignored for TA annuities:

$$
    a_{x:\enclose{actuarial}{n}} = \ddot{a}_{x:\enclose{actuarial}{n}} - 1 + {}_{n}E_x
$$

There is **no need to memorize** this expression as it can be easily derived using the WL conversion:

$$
\begin{aligned}
    a_{x:\enclose{actuarial}{n}}
    &= a_{x} - {}_{n}E_x a_{x+n} \\
    &= \ddot{a}_{x} - 1 - {}_{n}E_x (\ddot{a}_{x+n} - 1) \\
    &= \ddot{a}_{x} - 1 - {}_{n}E_x \cdot \ddot{a}_{x+n} + {}_{n}E_x \\
    &= \ddot{a}_{x} - {}_{n}E_x \cdot \ddot{a}_{x+n} - 1 + {}_{n}E_x \\
    &= \ddot{a}_{x:\enclose{actuarial}{n}} - 1 + {}_{n}E_x
\end{aligned}
$$

<!-- Self Made -->
![Term Annuity Due Immediate](Assets/4.%20Life%20Annuities.md/Term%20Annuity%20Due%20Immediate.png)

For variance, the random variables (which are certain annuities) are used instead:

$$
\begin{aligned}
    \text{Var}(\text{WL}_{Immediate})
    &= \text{Var}(a_{\enclose{actuarial}{k}}) \\
    &= \text{Var}(\ddot{a}_{\enclose{actuarial}{k+1}}-1) \\
    &= \text{Var}(\ddot{a}_{\enclose{actuarial}{k+1}}) \\
    &= \text{Var}(\text{WL}_{Due}) \\
    \\
    \text{Var}(\text{TA}_{Immediate})
    &= \text{Var}(a_{\enclose{actuarial}{\min(k,n)}}) \\
    &= \text{Var}(\ddot{a}_{\enclose{actuarial}{\min(k+1,n+1)}}-1) \\
    &= \text{Var}(\ddot{a}_{\enclose{actuarial}{\min(k+1,n+1)}}) \\
    &= \text{Var} \left( \frac{1-v^{\min(k+1,n+1)}}{d} \right) \\
    &= \frac{1}{d^2} \text{Var}(v^{\min(k+1,n+1)}) \\
    &= \frac{1}{d^2} \left({}_{2}A_{x:\enclose{actuarial}{n+1}} - (A_{x:\enclose{actuarial}{n+1}})^2 \right)
\end{aligned}
$$

Thus, the variance of a WL annuity is the same for both Immediate and Due but **NOT** for a TA annuity.

### **Recursions**

Following the same logic as assurances, Annuities can also be recursively expressed as a function of itself:

* If the policyholder dies, they would have only received the benefit of 1 at the start of the year
* If the policyholder survives, they would receive the **additional** benefits of the future periods
* The benefit of 1 is received **REGARDLESS of death or survival** as it was paid at the start of the year

$$
\begin{aligned}
    \text{WL}_\text{Due}
    &=
    \begin{cases}
        1,& q_x \\
        1 + v\ddot{a}_{x+1} ,& p_x
    \end{cases} \\
    &= 1 +
    \begin{cases}
        0,& q_x \\
        v\ddot{a}_{x+1} ,& p_x
    \end{cases} \\
    \\
    \therefore \ddot{a}_{x}
    &= 1 + vp_x\ddot{a}_{x+1}
\end{aligned}
$$

<!-- Self Made -->
![Annuity Recursion](Assets/4.%20Life%20Annuities.md/Annuity%20Recursion.png)

The same can be shown for TAs, but remember that the remaining duration of the policy must decrease as well:

$$
    \ddot{a}_{x:\enclose{actuarial}{n}} = 1 + vp_x \ddot{a}_{x+1:\enclose{actuarial}{n-1}}
$$

### **Probabilities and Percentiles**

Similar to assurances, apart from just calculating the Expectation and Variance, the **probabilities** and hence **percentiles** of the contract benefits can be calculated as well.

$$
\begin{aligned}
    \text{WL}_\text{Due} &\le u \\
    \frac{1-v^{k+1}}{d} &\le u \\
    1-v^{k+1} &\le ud \\
    v^{k+1} &\ge 1-ud \\
    (k+1) \ln v &\ge \ln(1-ud) \\
    k+1 &\le \frac{\ln(1-ud)}{\ln v} \\
    k &\le \frac{\ln(1-ud)}{\ln v} - 1 \\
\end{aligned}
$$

!!! Warning

    Similar to assurances, it is a **common mistake** to forget to flip the inequality sign as $\ln v \lt 0$.

<!-- Self Made -->
![Annuity Probability](Assets/4.%20Life%20Annuities.md/Annuity%20Probability.png){.center}

The RHS of the expression is unlikely to be an integer. However, $k$ can only take integer values. Thus, the values can **rounded DOWN** to the nearest whole number (EG. 4):

$$
\begin{aligned}
    P(k \le \frac{\ln(1-ud)}{\ln v} - 1)
    &= P(k \le 4) \\
    &= P(T_x \le 4) \\
    &= {}_{4}p_x
\end{aligned}
$$

!!! Note

    Similar to assurances, it is unlikely that the question will be as straightforward as the above.

The latter refers to calculating the **percentile of the random variable**, which is the smallest value of the RV that results in the specified probability.

This process is the opposite of the previous one - it involves solving for $T_x$, converting it to $k$ and then subsituting it back into the RV, which results in the associated percentile.

## **Payable Continuously**

Similar to assurances, annuities can also be payable $m$ times a year or payable continuously. Most of the key ideas carry over from the assurances, thus this section will mainly focus on the approximations from discrete annuities.

However, something unique to annuities is that the **conversion between due and immediates** is slightly different because of the differences in cashflows:

$$
    a^{(m)}_x = \ddot{a}^{(m)}_x - \frac{1}{m}
$$

<!-- Self Made -->
![Continous RV](Assets/4.%20Life%20Annuities.md/Continuous%20RV.png){.center}

### **Uniform Distribution of Deaths**

Using the relationship between Assurances and Annuities, a continuous WL annuity can also be expressed in the form of a continuous assurance:

$$
\begin{aligned}
    \ddot{a}^{(m)}_x &= \frac{1 - A^{(m)}_x}{d^{(m)}}
\end{aligned}
$$

Assuming UDD, the continuous assurance and hence the overarching continuous annuity can be simplified:

$$
\begin{aligned}
    \ddot{a}^{(m)}_x
    &= \frac{1 - A^{(m)}_x}{d^{(m)}} \\
    &= \frac{1 - \frac{i}{i^{(m)}}A_x}{d^{(m)}} \\
    &= \frac{\frac{i^{(m)}-iA_x}{i^{(m)}}}{d^{(m)}} \\
    &= \frac{i^{(m)}-iA_x}{i^{(m)}d^{(m)}} \\
    &= \frac{i^{(m)}-i(1-d\ddot{a}_x)}{i^{(m)}d^{(m)}} \\
    &= \frac{i^{(m)}-i+id\ddot{a}_x}{i^{(m)}d^{(m)}} \\
    &= \frac{id}{i^{(m)}d^{(m)}} \ddot{a}_x - \frac{i-i^{(m)}}{i^{(m)}d^{(m)}} \\
    &= \alpha(m)\ddot{a}_x - \beta(m) \\
    \\
    \therefore \alpha(m) &= \frac{id}{i^{(m)}d^{(m)}} \\
    \\
    \therefore \beta(m) &= \frac{i-i^{(m)}}{i^{(m)}d^{(m)}}
\end{aligned}
$$

!!! Note

    Recall that nominal and effective rates are linked using:

    $$
    \begin{aligned}
        i^{(m)} &= m[(1+i)^\frac{1}{m}-1] \\
        d^{(m)} &= m[1-(1+d)^\frac{1}{m}]   
    \end{aligned}
    $$

    However, for $i=0.05$, $\alpha$ and $\beta$ are **provided inside the SULT** for common values of $m$, thus there is no need to waste precious time calculating them.

An adjustment can be made for temporary annuities:

$$
\begin{aligned}
    \ddot{a}^{(m)}_{x:\enclose{actuarial}{n}}
    &= \ddot{a}^{(m)}_{x} - {}_{n}E_x \ddot{a}^{(m)}_{x+n} \\
    &= \alpha(m)\ddot{a}_x - \beta(m) - {}_{n}E_x [\alpha(m)\ddot{a}_{x:\enclose{actuarial}{n}} - \beta(m)] \\
    &= \alpha(m)\ddot{a}_x - \beta(m) - {}_{n}E_x \alpha(m)\ddot{a}_{x:\enclose{actuarial}{n}} - {}_{n}E_x \beta(m) \\
    &= \alpha(m) [\ddot{a}_x - {}_{n}E_x \ddot{a}_{x:\enclose{actuarial}{n}}] - \beta(m) [1-{}_{n}E_x] \\
    &= \alpha(m) \ddot{a}_{x:\enclose{actuarial}{n}} - \beta(m) [1-{}_{n}E_x]
\end{aligned}
$$

### **Woolhouse Approximation**

Since a continuous annuity can be expressed as a sum of **discrete pure endowments**, the trapezoidal rule and euler-macluarin correction can be used to approximate its EPV.

The key difference from before is understanding that the EPV of an annuity due is a **LEFT riemann sum** as there is a payment at time 0.

<!-- Obtained from Story of Mathematics -->
![Riemann Sum](Assets/1.%20Survival%20Models.md/Right%20Riemann%20Sum.png){.center}

$$
\begin{aligned}
    \bar{a}_x
    &= \int^{\infty}_0 v^t {}_{t}p_x \\
    & \approx h[f(a) + f(a+h) + \dots + f(b-h)] - \frac{h}{2} [f(a)-f(b)] + \frac{h^2}{12} [f'(a)-f'(b)]
\end{aligned}
$$

The first derivatives can be found below:

$$
\begin{aligned}
    f'(n)
    &= \frac{d}{dt} (e^{-\delta n} {}_{n}p_x) \\
    &= {}_{n}p_x \delta e^{-\delta n} - e^{-\delta n} {}_{n}p_x \mu_{x+n} \\
    &= e^{-\delta n} {}_{n}p_x (\delta + \mu_{x+n}) \\
    &= {}_{n}E_x (\delta + \mu_{x+n}) \\
    \\
    \therefore f'(0) &= -(\delta + \mu_{x}) \\
    \therefore f'(\infty) &= 0
\end{aligned}
$$

Assuming $h=1$,

$$
\begin{aligned}
    \bar{a}_x
    & \approx (1) [{}_{0}E_x + {}_{1}E_x + \dots + {}_{\infty-1}E_x] - \frac{1}{2} [{}_{0}E_x-{}_{\infty-1}E_x] + \frac{1}{12} [-(\delta + \mu_{x}) - 0] \\
    & \approx [1 + {}_{n}E_1 + \dots] - \frac{1}{2} [1-0] - \frac{1}{12} (\delta + \mu_{x}) \\
    & \approx \ddot{a}_x - \frac{1}{2} - \frac{1}{12} (\delta + \mu_{x})
\end{aligned}
$$

Assuming $h=\frac{1}{m}$ instead,

$$
\begin{aligned}
    \bar{a}_x
    & \approx \left(\frac{1}{m} \right) [{}_{0}E_x + {}_{\frac{1}{m}}E_x + \dots + {}_{\infty-\frac{1}{m}}E_x] - \frac{1}{2m} [{}_{0}E_x-{}_{\infty-\frac{1}{m}}E_x] + \frac{1}{12m^2} [-(\delta + \mu_{x}) - 0] \\
    & \approx \left(\frac{1}{m} \right) [1 + {}_{\frac{1}{m}}E_x + \dots] - \frac{1}{2m} [1-0] - \frac{1}{12m^2} (\delta + \mu_{x}) \\
    & \approx \ddot{a}^{(m)}_x - \frac{1}{2m} - \frac{1}{12m^2} (\delta + \mu_{x})
\end{aligned}
$$

Combining both together,

$$
\begin{aligned}
    \bar{a}_x &= \bar{a}_x \\
    \ddot{a}_x - \frac{1}{2} - \frac{1}{12} (\delta + \mu_{x}) & \approx \ddot{a}^{(m)}_x - \frac{1}{2m} - \frac{1}{12m^2} (\delta + \mu_{x}) \\
    \ddot{a}^{(m)}_x
    & \approx \ddot{a}_x - \frac{1}{2} - \frac{1}{12} (\delta + \mu_{x}) + \frac{1}{2m} + \frac{1}{12m^2} (\delta + \mu_{x}) \\
    & \approx \ddot{a}_x - (\frac{1}{2}-\frac{1}{2m}) - (\frac{1}{12} - \frac{1}{12m^2})(\delta + \mu_{x}) \\
    & \approx \ddot{a}_x - \frac{m-1}{2m} - \frac{m^2-1}{12m^2}(\delta + \mu_{x})
\end{aligned}
$$

This process is known as the **Woolhouse Approximation**. If the error term is omitted, then it is known as the **2-term Woolhouse Approximation** else it is known as the **3-term Woolhouse Approximation**.

The 3-term woolhouse approximation is *extremely accurate* due to its mathematical roots. It so much more accurate than UDD such that when calculating a continuous *assurance*, it is advisable to calculate the corresponding annuity using the 3 term approximation first and then convert it, for the best results.

Unfortunately, the drawback is that it requires knowledge about the force of mortality, which is not commonly provided in life tables. Thus, although less accurate, the **2 term approach can be easily used** in any situation.

### **Term Approximations**

Unlike assurances, the approximations for annuities have multiple components. Thus, the approximations for term annuities are slightly different from the ones used for WL.

However, there is **NO need to remember a seperate expression** for it, it can be calculated by converting the WL to a TA:

$$
\begin{aligned}
    a^{(m)}_{x:\enclose{actuarial}{n}}
    &= a^{(m)}_{x} - {}_{n}E_{x} a^{(m)}_{x+n} \\
    &= \alpha(m) \ddot{a}_{x} - \beta(m) - {}_{n}E_{x} (\alpha(m) \ddot{a}_{x+n} - \beta(m)) \\
    &= \alpha(m) \ddot{a}_{x} - \beta(m) - {}_{n}E_{x} \alpha(m) \ddot{a}_{x+n} + {}_{n}E_{x} \beta(m) \\
    &= \alpha(m) (\ddot{a}_{x} - {}_{n}E_{x} \ddot{a}_{x+n}) - \beta(m) (1-{}_{n}E_{x}) \\
    &= \alpha(m) (\ddot{a}_{x+n}) - \beta(m) (1-{}_{n}E_{x})
\end{aligned}
$$

A similar approach can be taken for the woolhouse approximation, resulting in the following:

$$
    a^{(m)}_{x:\enclose{actuarial}{n}} = \ddot{a}_{x+n} - \frac{m-1}{2m} (1-{}_{n}E_{x})
$$
